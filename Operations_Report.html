<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل أنشطة مشروع واحات فرافرة</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            color: #1a202c;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: bold;
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #4a5568;
        }
        
        select, input {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #3182ce;
        }
        
        .summary {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
        }
        
        .summary-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
        }
        
        .bg-blue { background-color: #dbeafe; color: #1e40af; }
        .bg-green { background-color: #dcfce7; color: #166534; }
        .bg-yellow { background-color: #fef3c7; color: #92400e; }
        .bg-red { background-color: #fee2e2; color: #991b1b; }
        
        .table-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: #f7fafc;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tr:hover {
            background-color: #f7fafc;
        }
        
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .badge-completed { background: #22c55e; color: white; }
        .badge-progress { background: #f59e0b; color: white; }
        .badge-not-started { background: #ef4444; color: white; }
        .badge-planned { background: #dbeafe; color: #1e40af; }
        
        .status-completed { background: #dcfce7; color: #166534; }
        .status-progress { background: #fef3c7; color: #92400e; }
        .status-not-started { background: #fee2e2; color: #991b1b; }
        
        .category-prep { background: #8b5cf6; color: white; }
        .category-purchase { background: #06b6d4; color: white; }
        .category-operation { background: #10b981; color: white; }
        .category-test { background: #f59e0b; color: white; }
        .category-plant { background: #84cc16; color: white; }
        
        .export-info {
            background: #dbeafe;
            border: 2px solid #bfdbfe;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .export-info h3 {
            color: #1e40af;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .export-info p {
            color: #1d4ed8;
            margin-bottom: 5px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .table-container {
                overflow-x: auto;
            }
            
            table {
                min-width: 800px;
            }
        }
        
        .search-box {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>تفاصيل جميع الأنشطة - مشروع واحات فرافرة</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>🔍 البحث في الأنشطة:</label>
                <input type="text" id="searchBox" class="search-box" placeholder="ابحث عن نشاط معين..." onkeyup="filterTable()">
            </div>
            <div class="control-group">
                <label>📊 ترتيب حسب:</label>
                <select id="sortBy" onchange="sortTable()">
                    <option value="name">اسم النشاط</option>
                    <option value="completed">الواحات</option>
                    <option value="planned">الفرافرة</option>
                    <option value="category">الفئة</option>
                </select>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label>🔄 تصفية حسب الحالة:</label>
                <select id="statusFilter" onchange="filterTable()">
                    <option value="all">جميع الأنشطة</option>
                    <option value="completed">مكتمل</option>
                    <option value="inProgress">قيد التنفيذ</option>
                    <option value="notStarted">لم يبدأ</option>
                </select>
            </div>
            <div class="control-group">
                <label>📂 تصفية حسب الفئة:</label>
                <select id="categoryFilter" onchange="filterTable()">
                    <option value="all">جميع الفئات</option>
                    <option value="تجهيز الارض">تجهيز الارض</option>
                    <option value="مشتريات">مشتريات</option>
                    <option value="عمليات">عمليات</option>
                    <option value="اختبار">اختبار</option>
                    <option value="زراعة">زراعة</option>
                </select>
            </div>
        </div>
        
        <div id="summary" class="summary">
            <div class="summary-item bg-blue">
                <div class="summary-number" id="totalCount">0</div>
                <div class="summary-label">إجمالي الأنشطة</div>
            </div>
            <div class="summary-item bg-green">
                <div class="summary-number" id="completedCount">0</div>
                <div class="summary-label">مكتمل</div>
            </div>
            <div class="summary-item bg-yellow">
                <div class="summary-number" id="progressCount">0</div>
                <div class="summary-label">قيد التنفيذ</div>
            </div>
            <div class="summary-item bg-red">
                <div class="summary-number" id="notStartedCount">0</div>
                <div class="summary-label">لم يبدأ</div>
            </div>
        </div>
        
        <div class="table-container">
            <table id="activitiesTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>اسم النشاط</th>
                        <th>الواحات</th>
                        <th>الفرافرة</th>
                        <th>الحالة</th>
                        <th>الفئة</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Table content will be generated by JavaScript -->
                </tbody>
            </table>
        </div>
        
    </div>

    <script>
        const projectData = [
            { name: 'حرث الارض بالديسك', completed: 100, planned: 100, category: 'تجهيز الارض' },
            { name: 'التعاقد مع مقاول معدات زراعيه', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'فك البيفوتات', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'التعاقد مع مقاول معدات حفر', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'حفر البحيرات', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'رفع الجسور والتشكيل', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'دمك الارضيه والجوانب', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'التعاقد مع مورد عزل', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'التعاقد علي تركيب العزل', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'فرد الجيوتكستايل', completed: 75, planned: 100, category: 'عمليات' },
            { name: 'فرد العزل واعمال اللحام', completed: 75, planned: 100, category: 'عمليات' },
            { name: 'اختبار العزل', completed: 50, planned: 100, category: 'عمليات' },
            { name: 'ملئ واختبار البحيرات', completed: 50, planned: 20, category: 'عمليات' },
            { name: 'التعاقد مع مقاول معدات حفر', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'حفر الخطوط الرئيسيه', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'حفر الخطوط الفرعيه', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'حفر خط ربط', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'التعاقد مع مصنع المواسير', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'التعاقد مع شركه تركيبات', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'توريد المواسير', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'تركيب المواسير', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تركيب الفيتنج ومحابس الهواء والنهايات', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تركيب البدايات والريازر', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'التعاقد مع مقاول معدات حفر', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'تربيط الخطوط الفرعيه', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تربيط الخطوط الرءيسيه', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تربيط خط الربط', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'الردم النهائي', completed: 90, planned: 90, category: 'عمليات' },
            { name: 'توريد المواسير', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'توريد القطع', completed: 99, planned: 99, category: 'مشتريات' },
            { name: 'تصنيع مخارج الطلمبات للبحيرتين (فرافره)', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تصنيع خطوط نقل المياه بين الاحواض (فرافره)', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تصنيع خطوط طبات الغسيل (الفرافره)', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'تصنيع مجاميع التحكم (الفرافره)', completed: 95, planned: 90, category: 'عمليات' },
            { name: 'تعليم الجور', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'توزيع الكمبوست', completed: 90, planned: 100, category: 'عمليات' },
            { name: 'تقليب التربه', completed: 90, planned: 100, category: 'عمليات' },
            { name: 'توريد مهمات شبكه الهواء (مواسير وقطع)', completed: 0, planned: 0, category: 'مشتريات' },
            { name: 'تصنيع شبكه الهواء', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'تركيب شبكه الهواء', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'التعاقد مع شركه لتنفيذ الاعمال', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'حفر قواعد الطلمبات والفلاتر', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'صب ارضيات خرسانه بحيره 1', completed: 100, planned: 100, category: 'عمليات' },
            { name: 'صب ارضيات خرسانه بحيره 2', completed: 100, planned: 50, category: 'عمليات' },
            { name: 'تركيب المظله بحيره 1', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'تركيب المظله بحيره 2', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'التعاقد علي اعمال الصبه واعمال المظله', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'اعمال صب خرسانات الشلال بحيره 1', completed: 50, planned: 0, category: 'عمليات' },
            { name: 'اعمال صب خرسانات الشلال بحيره 2', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'اعمال عزل وتشطيب شلال بحيره 1', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'اعمال عزل وتشطيب شلال بحيره 2', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'فرد خراطيم', completed: 90, planned: 100, category: 'عمليات' },
            { name: 'تركيب كيعان ووصلات', completed: 90, planned: 100, category: 'عمليات' },
            { name: 'تركيب نقاط', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'التعاقد علي الفلاتر', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'تركيب محطه فلات 1', completed: 0, planned: 100, category: 'عمليات' },
            { name: 'تركيب محطه فلاتر 2', completed: 0, planned: 30, category: 'عمليات' },
            { name: 'تركيب مانيفولد الفلاتر والطلمبات', completed: 0, planned: 100, category: 'عمليات' },
            { name: 'تركيب مانيفولد الفلاتر والسمادات', completed: 0, planned: 30, category: 'عمليات' },
            { name: 'التوصيل بالشبكه', completed: 0, planned: 50, category: 'عمليات' },
            { name: 'تركيب الموتور والفنشوري', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'تركيب وتوصيل التنكات', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'التعاقد علي توريدات لوحات التحكم', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'توريد لوحات التحكم ومشتملاتها', completed: 0, planned: 0, category: 'مشتريات' },
            { name: 'نقل وتحويل المولدات', completed: 20, planned: 0, category: 'عمليات' },
            { name: 'تركيب اللوحات وتوصيل السيستم (الطلمبات - الفلاتر - السمادات)', completed: 0, planned: 0, category: 'عمليات' },
            { name: 'التعاقد علي الطلمبات', completed: 100, planned: 100, category: 'مشتريات' },
            { name: 'توريد الطلمبات', completed: 50, planned: 50, category: 'مشتريات' },
            { name: 'تركيب الطلمبات', completed: 50, planned: 0, category: 'عمليات' },
            { name: 'اختبار الخطوط الرئيسيه', completed: 20, planned: 0, category: 'اختبار' },
            { name: 'اختبار الخطوط الفرعيه', completed: 20, planned: 25, category: 'اختبار' },
            { name: 'اختبار خطوط الربط', completed: 70, planned: 50, category: 'اختبار' },
            { name: 'تعليم الزراعه', completed: 60, planned: 60, category: 'زراعة' },
            { name: 'انهاء اعمال الزراعه', completed: 0, planned: 0, category: 'زراعة' },
            { name: 'تركيب السنادات', completed: 0, planned: 0, category: 'عمليات' }
        ];

        let filteredData = [...projectData];

        function getStatus(completed) {
            if (completed === 100) return 'مكتمل';
            if (completed > 0) return 'قيد التنفيذ';
            return 'لم يبدأ';
        }

        function getStatusClass(completed) {
            if (completed === 100) return 'badge-completed';
            if (completed > 0) return 'badge-progress';
            return 'badge-not-started';
        }

        function getStatusBgClass(completed) {
            if (completed === 100) return 'status-completed';
            if (completed > 0) return 'status-progress';
            return 'status-not-started';
        }

        function getCategoryClass(category) {
            const classes = {
                'تجهيز الارض': 'category-prep',
                'مشتريات': 'category-purchase',
                'عمليات': 'category-operation',
                'اختبار': 'category-test',
                'زراعة': 'category-plant'
            };
            return classes[category] || 'category-operation';
        }

        function updateSummary() {
            const total = filteredData.length;
            const completed = filteredData.filter(item => item.completed === 100).length;
            const progress = filteredData.filter(item => item.completed > 0 && item.completed < 100).length;
            const notStarted = filteredData.filter(item => item.completed === 0).length;

            document.getElementById('totalCount').textContent = total;
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('progressCount').textContent = progress;
            document.getElementById('notStartedCount').textContent = notStarted;
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            filteredData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="text-align: center; font-weight: 600;">${index + 1}</td>
                    <td style="text-align: right; font-weight: 500;">${item.name}</td>
                    <td style="text-align: center;">
                        <span class="badge ${getStatusClass(item.completed)}">${item.completed}%</span>
                    </td>
                    <td style="text-align: center;">
                        <span class="badge badge-planned">${item.planned}%</span>
                    </td>
                    <td style="text-align: center;">
                        <span class="badge ${getStatusBgClass(item.completed)}">${getStatus(item.completed)}</span>
                    </td>
                    <td style="text-align: center;">
                        <span class="badge ${getCategoryClass(item.category)}">${item.category}</span>
                    </td>
                `;
                tbody.appendChild(row);
            });

            updateSummary();
        }

        function filterTable() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;

            filteredData = projectData.filter(item => {
                const matchesSearch = item.name.toLowerCase().includes(searchTerm);
                
                let matchesStatus = true;
                if (statusFilter === 'completed') matchesStatus = item.completed === 100;
                else if (statusFilter === 'inProgress') matchesStatus = item.completed > 0 && item.completed < 100;
                else if (statusFilter === 'notStarted') matchesStatus = item.completed === 0;
                
                const matchesCategory = categoryFilter === 'all' || item.category === categoryFilter;
                
                return matchesSearch && matchesStatus && matchesCategory;
            });

            renderTable();
        }

        function sortTable() {
            const sortBy = document.getElementById('sortBy').value;
            
            filteredData.sort((a, b) => {
                if (sortBy === 'name') return a.name.localeCompare(b.name, 'ar');
                if (sortBy === 'completed') return b.completed - a.completed;
                if (sortBy === 'planned') return b.planned - a.planned;
                if (sortBy === 'category') return a.category.localeCompare(b.category, 'ar');
                return 0;
            });

            renderTable();
        }

        // Initialize table on page load
        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
        });
    </script>
</body>
</html>
